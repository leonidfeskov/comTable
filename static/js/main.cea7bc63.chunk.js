(this.webpackJsonpcomtable=this.webpackJsonpcomtable||[]).push([[0],{53:function(e,a,t){e.exports=t(74)},62:function(e,a,t){},63:function(e,a,t){},65:function(e,a,t){},68:function(e,a,t){},69:function(e,a,t){},70:function(e,a,t){},71:function(e,a,t){},72:function(e,a,t){},73:function(e,a,t){},74:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(8),i=t.n(c),o=t(14),l=t(21),s=t(49),u=t(102),m=t(97),d=t(101);t(62);function p(){return r.a.createElement("div",{className:"header"},r.a.createElement(m.a,{maxWidth:"lg"},r.a.createElement("div",{className:"header-logo"})))}t(63);function v(){return r.a.createElement("div",{className:"footer"},r.a.createElement(m.a,{maxWidth:"lg"},"Copyright \xa9 Leonid Feskov 2020."))}var _=t(17),E=t.n(_),f=t(37),b=t.n(f),O=t(5),N=t(105),A=Object(O.a)({root:{position:"absolute",zIndex:1,left:0,right:0,bottom:-1,padding:0},rail:{backgroundColor:"transparent"}})(N.a);function T(e){var a=e.value,t=e.onChange;return r.a.createElement(A,{value:a,onChange:t,color:"secondary","aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,min:0,max:10})}var g=t(36);t(65);function R(e){var a=e.kind,t=e.text,n=e.size,c=e.onClick;return r.a.createElement("button",{className:E()("button-icon button-icon_".concat(a),Object(g.a)({},"button-icon_".concat(n),n)),onClick:c},t)}t(104),t(48),t(103);var I=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_LOADING":return a.isLoading;default:return e}};var y,S=t(30),h=t(15),P=function(){return String((new Date).getTime())},C={variants:[{id:"1",name:"React"},{id:"2",name:"Angular"},{id:"3",name:"Vue"}],properties:[{id:"1",name:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u0430\u043a\u0430\u043d\u0441\u0438\u0439",rate:5},{id:"2",name:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0440\u0435\u0437\u044e\u043c\u0435",rate:5},{id:"3",name:"\u0417\u0430\u0440\u043f\u043b\u0430\u0442\u0430",rate:5}],values:[[159,120,100],[34,23,20],[1e5,9e4,12e4]]};if(localStorage.getItem("comparisonTable"))try{y=JSON.parse(localStorage.getItem("comparisonTable"))}catch(z){console.error(z)}var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y||C,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"COMPARISON_TABLE_SET_ALL":return a.payload;case"COMPARISON_TABLE_SET_PROPERTY_VALUE":return Object(h.a)({},e,{values:e.values.map((function(e,t){return t===a.propertyIndex?e.map((function(e,t){return t===a.variantIndex?a.value:e})):e}))});case"COMPARISON_TABLE_SET_PROPERTY_NAME":return Object(h.a)({},e,{properties:e.properties.map((function(e){return e.id===a.propertyId?Object(h.a)({},e,{name:a.name}):e}))});case"COMPARISON_TABLE_SET_PROPERTY_RATE":return Object(h.a)({},e,{properties:e.properties.map((function(e){return e.id===a.propertyId?Object(h.a)({},e,{rate:a.rate}):e}))});case"COMPARISON_TABLE_SET_VARIANT_NAME":return Object(h.a)({},e,{variants:e.variants.map((function(e){return e.id===a.variantId?Object(h.a)({},e,{name:a.name}):e}))});case"COMPARISON_TABLE_ADD_PROPERTY":return Object(h.a)({},e,{properties:[].concat(Object(S.a)(e.properties),[{id:P(),name:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u0438\u0437\u043d\u0430\u043a",rate:5}]),values:[].concat(Object(S.a)(e.values),[e.variants.map((function(){return 1}))])});case"COMPARISON_TABLE_REMOVE_PROPERTY":var t=e.properties.findIndex((function(e){return e.id===a.propertyId}));return Object(h.a)({},e,{properties:e.properties.filter((function(e){return e.id!==a.propertyId})),values:e.values.filter((function(e,a){return a!==t}))});case"COMPARISON_TABLE_ADD_VARIANT":return Object(h.a)({},e,{variants:[].concat(Object(S.a)(e.variants),[{id:P(),name:"\u041d\u043e\u0432\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442"}]),values:e.values.map((function(e){return[].concat(Object(S.a)(e),[1])}))});case"COMPARISON_TABLE_REMOVE_VARIANT":var n=e.variants.findIndex((function(e){return e.id===a.variantId}));return Object(h.a)({},e,{variants:e.variants.filter((function(e){return e.id!==a.variantId})),values:e.values.map((function(e){return e.filter((function(e,a){return a!==n}))}))});default:return e}};t(68);function L(){var e=Object(o.b)(),a=Object(o.c)((function(e){return e.comparisonTable})),t=a.variants,c=a.properties,i=a.values,l=window.location.search,s=new URLSearchParams(l).get("id");Object(n.useEffect)((function(){s||e({type:"SET_LOADING",isLoading:!1})}),[]),Object(n.useEffect)((function(){s||localStorage.setItem("comparisonTable",JSON.stringify(a))}),[a]);var u=Object(n.useRef)(""),m=function(a){var t,n,r,c=a.target,i=a.currentTarget;e((t=Number(i.dataset.propertyIndex),n=Number(i.dataset.variantIndex),r=Number(c.value)||0,{type:"COMPARISON_TABLE_SET_PROPERTY_VALUE",propertyIndex:t,variantIndex:n,value:r}))},d=function(e){var a=e.target;u.current=a.value},p=function(e){var a=e.target;!function(e){var a=document.createRange(),t=e.childNodes[0];t&&(a.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(a))}(a),u.current=a.innerText},v=function(a){var t,n,r=a.target;e((t=r.dataset.propertyId,n=u.current,{type:"COMPARISON_TABLE_SET_PROPERTY_NAME",propertyId:t,name:n}))},_=function(a){var t,n,r=a.target;e((t=r.dataset.variantId,n=u.current,{type:"COMPARISON_TABLE_SET_VARIANT_NAME",variantId:t,name:n}))};return r.a.createElement("div",{className:"comparison-table-container"},r.a.createElement("div",{className:"comparison-table"},r.a.createElement("div",{className:"comparison-table__row comparison-table__row_head"},r.a.createElement("div",{className:"comparison-table__cell comparison-table__cell_spacer"}),r.a.createElement("div",{className:"comparison-table__value"},t.map((function(a){return r.a.createElement("div",{className:"comparison-table__cell comparison-table__cell_head",key:a.id},r.a.createElement(b.a,{className:"comparison-table__cell-editable","data-variant-id":a.id,html:a.name,onChange:d,onFocus:p,onBlur:_}),r.a.createElement("div",{className:"comparison-table-remove-variant"},r.a.createElement(R,{kind:"remove",onClick:function(){return t=a.id,void(window.confirm("\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442?")&&e(function(e){return{type:"COMPARISON_TABLE_REMOVE_VARIANT",variantId:e}}(t)));var t}})))})))),c.map((function(a,n){return r.a.createElement("div",{className:E()("comparison-table__row",{"comparison-table__row_disabled":!a.rate}),key:a.id},r.a.createElement("div",{className:"comparison-table__cell comparison-table__cell_property"},r.a.createElement(b.a,{className:"comparison-table__cell-editable","data-property-id":a.id,html:a.name,onChange:d,onFocus:p,onBlur:v}),r.a.createElement(T,{value:a.rate,onChange:function(t,n){return r=a.id,i=n,void(c.find((function(e){return e.id===r})).rate!==i&&e(function(e,a){return{type:"COMPARISON_TABLE_SET_PROPERTY_RATE",propertyId:e,rate:a}}(r,i)));var r,i}})),r.a.createElement("div",{className:"comparison-table__value"},i[n]&&i[n].map((function(e,a){return r.a.createElement("div",{className:"comparison-table__cell",key:t[a].id},r.a.createElement(b.a,{className:"comparison-table__cell-editable","data-property-index":n,"data-variant-index":a,html:String(e),onChange:m,onFocus:p}))}))),r.a.createElement("div",{className:"comparison-table-remove-property"},r.a.createElement(R,{kind:"remove",onClick:function(){return t=a.id,void(window.confirm("\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0440\u0438\u0437\u043d\u0430\u043a?")&&e(function(e){return{type:"COMPARISON_TABLE_REMOVE_PROPERTY",propertyId:e}}(t)));var t}})))}))),r.a.createElement("div",{className:"comparison-table-actions"},r.a.createElement("div",{className:"comparison-table-actions__add-row"},r.a.createElement(R,{kind:"add-row",size:"large",onClick:function(){return e({type:"COMPARISON_TABLE_ADD_PROPERTY"})}})),t.length<4&&r.a.createElement("div",{className:"comparison-table-actions__add-column"},r.a.createElement(R,{kind:"add-column",size:"large",onClick:function(){return e({type:"COMPARISON_TABLE_ADD_VARIANT"})}}))))}var w=t(99);t(69);function M(e){var a=e.value,t=e.isWorst,n=e.isBest;return r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:E()("progress__bar",{progress__bar_worst:t,progress__bar_best:n}),style:{width:"".concat(100*a,"%")}}))}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_SUMMARY":return a.summary;default:return e}},B=(t(70),Object(w.a)((function(){return{root:{padding:0},listItem:{display:"block"}}})));function k(){B();var e=Object(o.b)(),a=Object(o.c)((function(e){return e})),t=a.summary,c=a.comparisonTable,i=0,l=1;return t.forEach((function(e){e.value>i&&(i=e.value),e.value<l&&(l=e.value)})),Object(n.useEffect)((function(){var a=function(e){var a=e.variants,t=e.properties,n=e.values,r=t.reduce((function(e,a){return e+a.rate}),0),c=t.map((function(e){return e.rate/r})),i=[];return n.forEach((function(e,a){i[a]=[];var t=e.reduce((function(e,a){return e+a}),0);i[a]=e.map((function(e){return e/t}))})),a.map((function(e,a){return{id:e.id,name:e.name,value:c.reduce((function(e,t,n){return e+t*(i[n]?i[n][a]:0)}),0)}}))}(c);e(function(e){return{type:"SET_SUMMARY",summary:e}}(a))}),[c]),r.a.createElement("div",{className:"summary-list"},t.map((function(e){return r.a.createElement("div",{key:e.id,className:"summary-list-item"},r.a.createElement("div",{className:E()("summary-text",{"summary-text_best":e.value===i})},r.a.createElement("span",null,e.name),r.a.createElement("span",null,e.value.toFixed(3))),r.a.createElement(M,{value:e.value,isWorst:e.value===l,isBest:e.value===i}))})))}var D=t(100);t(71);function V(){return r.a.createElement("div",{className:"loading"},r.a.createElement(D.a,{color:"secondary"}))}t(72);var Y=function(){var e=Object(o.c)((function(e){return e.loading}));return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"main"},r.a.createElement(p,null),r.a.createElement(m.a,{maxWidth:"lg"},r.a.createElement(d.a,{container:!0,spacing:3},r.a.createElement(d.a,{item:!0,xs:12,sm:12,md:8,lg:8},r.a.createElement(L,null)),r.a.createElement(d.a,{item:!0,xs:12,sm:8,md:4,lg:4},r.a.createElement(k,null))))),r.a.createElement(v,null),e&&r.a.createElement(V,null))},U=Object(l.b)({comparisonTable:j,summary:x,loading:I}),F=(t(73),Object(l.c)(U,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),W=Object(s.a)({palette:{type:"dark",primary:{main:"#cfd8dc"},secondary:{main:"#ff9800"}}});i.a.render(r.a.createElement(o.a,{store:F},r.a.createElement(u.a,{theme:W},r.a.createElement(Y,null))),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.cea7bc63.chunk.js.map